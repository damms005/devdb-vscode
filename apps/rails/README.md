# Rails Store

A flexible Rails application with multi-database support, allowing seamless switching between PostgreSQL, MySQL, and SQLite.

## Requirements

- Ruby 3.2+
- Rails 8.0+
- Docker (for PostgreSQL and MySQL containers)

## Database Configuration

This application supports three database systems:

- PostgreSQL
- MySQL
- SQLite

### Switching Database Systems

Use the provided scripts to switch between database systems:

```bash
# Switch to PostgreSQL
./scripts/switch_db/postgres.sh

# Switch to MySQL
./scripts/switch_db/mysql.sh

# Switch to SQLite
./scripts/switch_db/sqlite.sh
```

Each script will:
1. Configure the appropriate database adapter in the Gemfile
2. Set up the database.yml configuration
3. Create necessary database structures
4. Seed sample data (products, categories, users)

### Database Connection Details

#### PostgreSQL
- Host: localhost
- Port: 3333
- Username: postgres
- Password: mysecretpassword
- Database: sample_db

#### MySQL
- Host: 127.0.0.1
- Port: 2222
- Username: root
- Password: mysecretpassword
- Database: sample_db

#### SQLite
- Database: storage/development.sqlite3

## Development

### Running the Application

After switching to your preferred database:

```bash
# Start the Rails server
bin/rails server
```

### Testing

Run the test suite with:

```bash
bin/rails test
```

Note: Make sure to switch to the appropriate database before running tests.

## Database Schema

The application includes the following tables:

- **Products**: Store items with name, description, price, and stock quantity
- **Categories**: Product categories with name and description
- **Users**: User accounts with email and name

## Docker Containers

The PostgreSQL and MySQL scripts use Docker containers for database services:

- **PostgreSQL**: Container named `postgres-devdb-triage` on port 3333
- **MySQL**: Container named `mysql-devdb-triage` on port 2222

**IMPORTANT**: These Docker containers must be running before executing the database switching scripts. The scripts expect the containers to be available and will attempt to connect to them.

## Notes

- The database switching scripts handle all necessary configuration and data seeding
- Each script creates a consistent set of sample data across all database systems
- UUID handling differs between database systems due to native support differences
- Migration files generated by the scripts are ignored by Git
